(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group"],{"1aeb":function(t,e,o){"use strict";var n=o("e39f"),r=o.n(n);r.a},"214f":function(t,e,o){"use strict";var n=o("32e9"),r=o("2aba"),i=o("79e5"),s=o("be13"),a=o("2b4c");t.exports=function(t,e,o){var u=a(t),d=o(s,u,""[t]),c=d[0],l=d[1];i(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,c),n(RegExp.prototype,u,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}))}},"28a5":function(t,e,o){o("214f")("split",2,function(t,e,n){"use strict";var r=o("aae3"),i=n,s=[].push,a="split",u="length",d="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[u]||2!="ab"[a](/(?:ab)*/)[u]||4!="."[a](/(.?)(.?)/)[u]||"."[a](/()()/)[u]>1||""[a](/.?/)[u]){var c=void 0===/()??/.exec("")[1];n=function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!r(t))return i.call(o,t,e);var n,a,l,p,m,f=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,b=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,h+"g");c||(n=new RegExp("^"+v.source+"$(?!\\s)",h));while(a=v.exec(o)){if(l=a.index+a[0][u],l>g&&(f.push(o.slice(g,a.index)),!c&&a[u]>1&&a[0].replace(n,function(){for(m=1;m<arguments[u]-2;m++)void 0===arguments[m]&&(a[m]=void 0)}),a[u]>1&&a.index<o[u]&&s.apply(f,a.slice(1)),p=a[0][u],g=l,f[u]>=b))break;v[d]===a.index&&v[d]++}return g===o[u]?!p&&v.test("")||f.push(""):f.push(o.slice(g)),f[u]>b?f.slice(0,b):f}}else"0"[a](void 0,0)[u]&&(n=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(o,r){var i=t(this),s=void 0==o?void 0:o[e];return void 0!==s?s.call(o,i,r):n.call(String(i),o,r)},n]})},aae3:function(t,e,o){var n=o("d3f4"),r=o("2d95"),i=o("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==r(t))}},d684:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.group?o("div",[o("div",{staticClass:"mb-2 clearfix"},[o("router-link",{staticClass:"float-left",attrs:{to:"/"}},[t._v("\n      ü°Ñ  Go back\n    ")]),o("button",{staticClass:"btn btn-danger btn-sm float-right mx-1",on:{click:t.deleteGroup}},[t._v("\n      üóëÔ∏è Delete\n    ")]),o("button",{staticClass:"btn btn-primary btn-dark btn-sm float-right mx-1",attrs:{role:"button"},on:{click:t.addTodoAsNotCreated}},[o("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABaUlEQVQ4T2NkoBAw4tIfujt0PwMDgwNU/sBq19WO2NTiNCBoR9B/MzMzsJ5Tp04xrPNYh1UtTgP8tvj9Nzc3Bxtw8uRJhk0+m0gzwHO9538LCwuwASdOnGDYHridNAOcVzr/t7S0BBtw/Phxhr3he3EbYLvYdj8zM7MDGxsbAwizsrKCsaKiItiA+/fvM/z+/RuMf/36BcZ///49cDj2sCPYVLM5Zv+DgoJQAvnr168MX758AYvx8PAwcHNzo8ivW7eO4VTKKUawAQbTDP7b2NiQlCKOHDnCcCHrAsQAzX7N/SwsLA4gZ4O8wM7ODvaCkpIS2NB79+6Bnf/z50+w80HsP3/+HLheeB3iBWxAuVP5v52dHVjq0KFDDHfL75IWC7LNsv/t7e3BBhw8eJDhce1j0gyQqJP47+AASckHDhxgeNH0gjQDRKpE/js6QpL//v37Gd60vSHNAMFyQZTM9L7zPWmZidg4BQC6j4QRBvLeBAAAAABJRU5ErkJggg=="}}),t._v("\n      Add TODO\n    ")])],1),o("div",{class:{"card mx-auto mb-5":!0,"border-success":t.group.finished},staticStyle:{width:"55rem"}},[o("group-title",{attrs:{group:t.group},on:{"update:group":t.updateGroup}}),o("todo-list",{attrs:{group:t.group,bus:t.bus}})],1)]):t._e()},r=[],i=(o("96cf"),o("3040")),s=o("2b0e"),a=o("d450"),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("draggable",{staticClass:"row justify-content-center mx-0",attrs:{options:t.draggableOptions},model:{value:t.group.todo,callback:function(e){t.$set(t.group,"todo",e)},expression:"group.todo"}},t._l(t.group.todo,function(e,n){return o("div",{key:e.id,class:(r={"todo--border":t.isNotLastRow(n)},r["col-"+12/t.cols+" todo pr-2"]=!0,r),on:{mouseover:function(e){t.todoSwowEditByIndex=n},mouseout:function(e){t.todoSwowEditByIndex=null}}},[o("transition",{attrs:{name:"fade",mode:"out-in"}},[t.todoEditableByIndex===n?o("todo-form",{key:"editMode",attrs:{"todo-prop":e},on:{saveEdited:t.saveEdited,stopEditing:t.stopEditing}}):o("div",{key:"watchMode"},[o("todo-checkbox",{attrs:{"todo-prop":e},on:{input:t.updateTodo}}),e.comment?o("small",{class:{"todo__info text-muted d-block text-center":!0,"todo__info--hovered":t.todoSwowEditByIndex===n}},[t._v("\n            "+t._s(e.comment)+"\n          ")]):o("br"),o("transition",{attrs:{name:"slide-fade"}},[t.todoSwowEditByIndex===n?o("div",{staticClass:"d-flex justify-content-center",staticStyle:{position:"absolute",width:"90%",bottom:"15%"}},[o("button",{staticClass:"btn btn-primary mx-2 my-1 btn-circle-sm",on:{click:function(e){t.todoEditableByIndex=n}}},[t._v("\n                ‚úèÔ∏è\n              ")]),o("button",{staticClass:"btn btn-danger mx-2 my-1 btn-circle-sm",on:{click:function(o){t.deleteTodo(e)}}},[t._v("\n                üóëÔ∏è\n              ")]),o("button",{staticClass:"btn btn-secondary mx-2 my-1 btn-circle-sm draggable-handler"},[t._v("\n                :::\n              ")])]):t._e()])],1)],1)],1);var r}))],1)},d=[],c=(o("f751"),o("28a5"),o("7514"),o("cadf"),o("551c"),o("097d"),o("1516")),l=o.n(c),p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"d-flex align-items-center text-muted float-left"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.title,expression:"todo.title"}],staticClass:"form-control form-control-sm rounded-top",staticStyle:{"border-bottom-left-radius":"0!important","border-bottom-right-radius":"0!important"},attrs:{type:"text",placeholder:"Title"},domProps:{value:t.todo.title},on:{input:function(e){e.target.composing||t.$set(t.todo,"title",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.comment,expression:"todo.comment"}],staticClass:"form-control form-control-sm",staticStyle:{"border-top-left-radius":"0!important","border-top-right-radius":"0!important"},attrs:{type:"text",placeholder:"Comment"},domProps:{value:t.todo.comment},on:{input:function(e){e.target.composing||t.$set(t.todo,"comment",e.target.value)}}})]),o("div",{staticClass:"btn-group ml-2",attrs:{role:"group"}},[o("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){t.$emit("saveEdited",t.todo)}}},[t._v("\n      –û–∫\n    ")]),o("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){t.$emit("stopEditing")}}},[t._v("\n      X\n    ")])])])},m=[],f={name:"TodoForm",props:{todoProp:{type:Object,required:!0}},data:function(){return{todo:this.todoProp}},watch:{todo:function(t){this.$emit("input",t)}}},h=f,g=o("2877"),b=Object(g["a"])(h,p,m,!1,null,null,null);b.options.__file="TodoForm.vue";var v=b.exports,x=o("fbb0"),w={name:"TodoList",components:{TodoForm:v,TodoCheckbox:x["a"],draggable:l.a},props:{group:{type:Object,required:!0},bus:{type:Object,required:!0}},data:function(){return{cols:3,todoSwowEditByIndex:null,todoEditableByIndex:null,draggableOptions:{draggable:".todo",animation:400,handle:".draggable-handler"}}},created:function(){var t=this;this.bus.$on("addTodoAsNotCreated",function(){t.todoEditableByIndex=t.group.todo.length-1})},methods:{updateTodo:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var o,n,r,i,s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.id,n=e.completed,r=this.group.todo.find(function(t){return t.id===o}),i=(new Date).toISOString().split(/[T\\.]/).slice(0,2).join(" "),s=n?i:null,a={completed:n,completed_at:s},Object.assign(r,a),this.bus.$emit("todoEdited"),t.next=9,this.$put("todo/"+o,{completed:n,completed_at:s});case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),saveEdited:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var o,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.id,n=e.comment,r=e.title,-1!==o){t.next=9;break}return t.t0=this.bus,t.next=5,this.createTodo({group_id:this.group.id,comment:n,title:r});case 5:t.t1=t.sent,t.t0.$emit.call(t.t0,"todoCreated",t.t1),t.next=11;break;case 9:return t.next=11,this.$put("todo/"+o,{comment:n,title:r});case 11:this.todoEditableByIndex=null;case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deleteTodo:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var o,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.id,n=e.title,!confirm('–£–¥–∞–ª–∏—Ç—å "'.concat(n,'"?'))){t.next=5;break}return t.next=4,this.$delete("todo/"+o);case 4:this.bus.$emit("todoDeleted",o);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),createTodo:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.$post("todo/",e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),stopEditing:function(){this.bus.$emit("stopEditing",this.todoEditableByIndex),this.todoEditableByIndex=null},isNotLastRow:function(t){var e=this.group.todo.length%this.cols;return e?e<this.group.todo.length-t:this.group.todo.length-t>this.cols}}},y=w,A=(o("1aeb"),Object(g["a"])(y,u,d,!1,null,null,null));A.options.__file="TodoList.vue";var C=A.exports,_={name:"Group",components:{GroupTitle:a["a"],TodoList:C},props:{id:{type:String,default:null}},data:function(){return{group:null,bus:new s["a"]}},mounted:function(){var t=this;this.fetch(),this.bus.$on("stopEditing",function(e){return t.resetTodoAsNotCreated()}),this.bus.$on("todoCreated",function(e){t.resetTodoAsNotCreated(),t.group.todo.push(e),t.updateGroupStat()}),this.bus.$on("todoEdited",function(e){t.updateGroupStat()}),this.bus.$on("todoDeleted",function(e){t.group.todo=t.group.todo.filter(function(t){return t.id!==e}),t.updateGroupStat()})},methods:{fetch:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$get("groups/"+this.id);case 2:this.group=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateGroup:function(t){this.group=t},addTodoAsNotCreated:function(){this.resetTodoAsNotCreated(),this.group.todo.push({id:-1,title:"",comment:"",completed:!1,created_at:null,completed_at:null}),this.bus.$emit("addTodoAsNotCreated")},deleteGroup:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("–£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É?")){t.next=4;break}return t.next=3,this.$delete("groups/"+this.group.id);case 3:this.$router.push("/");case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),resetTodoAsNotCreated:function(){this.group.todo=this.group.todo.filter(function(t){return-1!==t.id})},updateGroupStat:function(){this.group.finished=(this.group.todo_completed_count=this.group.todo.filter(function(t){return t.completed}).length)===(this.group.todo_count=this.group.todo.length)}}},E=_,k=Object(g["a"])(E,n,r,!1,null,null,null);k.options.__file="Group.vue";e["default"]=k.exports},e39f:function(t,e,o){}}]);
//# sourceMappingURL=group.c6a3b084.js.map